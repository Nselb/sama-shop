<div class="products-container">
  <h1>Productos</h1>

  @if (products.length === 0) {
    <div class="empty-state">
      <p>No hay productos disponibles</p>
    </div>
  } @else {
    <div class="products-grid">
      @for (product of products; track product.id) {
        <a [routerLink]="['/products', product.slug]" class="product-card">
          @if (getCurrentImage(product)) {
            <img
              [src]="getCurrentImage(product)!"
              [alt]="product.name"
              class="product-image"
            />
          } @else {
            <div class="product-image-placeholder">
              <span>Sin imagen</span>
            </div>
          }
          <div class="product-info">
            <h3 class="product-name">{{ product.name }}</h3>
          </div>
          <div class="hover-overlay">
            @if (product.description) {
              <p class="product-description">{{ product.description }}</p>
            }
            @if (product.variants && product.variants.length > 0) {
              <div class="variants-chips">
                @for (variant of product.variants; track variant.name) {
                  <span
                    class="variant-chip"
                    [class.has-color]="variant.colorCode"
                    [style.border-color]="variant.colorCode || undefined"
                    (mouseenter)="onVariantMouseEnter(product.id, variant)"
                    (mouseleave)="onVariantMouseLeave(product.id)"
                  >
                    @if (variant.colorCode) {
                      <span
                        class="color-indicator"
                        [style.background-color]="variant.colorCode"
                      ></span>
                    }
                    <span class="variant-name">{{ variant.name }}</span>
                  </span>
                }
              </div>
            }
          </div>
        </a>
      }
    </div>
  }
</div>
